<!doctype html>
<html>

	<head> 
		
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../Public/css/public.css" />
		<link rel="stylesheet" type="text/css" href="../../css/news/news.css" />		
		<script src="../../Public/js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/mui.min.js"></script>
		<script src="../../Public/js/public.js" type="text/javascript" charset="utf-8"></script>
		
	</head>

	<body>
		<div class="bell"></div>
		<div class="search"></div>
		<div class="one"></div>
		<div class="header_box">
			<div class="before_header"></div>
			<header class="ui_flex_wrapper ui_flex_h " id='header'>
				<!--<div class="header_title"></div>-->
				
			</header>
		</div>
		<div id="news_content">
			<div class="game color_white">
				<div class="game_header"></div>
				<div class="game_name overflow">游戏名称</div>
				<div class="game_datail overflow">游戏介绍 </div>
				<div>
					<div class="star"></div>
					<div class="score font_bold ui_flex_wrapper">
						<span style="max-width: 2rem;text-align: left;margin-right:0.1rem;" class="new_score">8.8</span>
						<span>分</span>
					</div>
				</div>
			</div>
			<div class="news_artAlone">
				<div class="news_art ofh">
					<div class="news_img">
						<div class="news_img_content color_white">
							<div class="news_img_header fl"></div>
							<div class="fl  new_art_name font_14 overflow">游戏名称</div>
							<div class="fr font_12" style="margin-top: 1.75rem;">
								
								<div class="fr news_art_viewNum" style="width: 1.8rem;">1122</div>
								<div class="fr news_art_view"></div>
							</div>
						</div>
					</div>
					<div class="news_art_content ">
						<div class="news_art_art font_14 font_bold fl ofh">
							就会爆发看都不看节哀顺变丹江口市就会爆发看都不看节哀顺变丹
							<!--<span class="official backgroundColor_green color_white tac">官方</span>-->
						</div>

					</div>
					<!--此行定位的，不用理-->
					<div class="news_art_time font_12">
						8小时前
					</div>
					<!--。。。。。-->

				</div>

				<div class="news_art2 ofh">
					<div class="news_img">
						<div class="news_img_content color_white">
							<div class="news_img_header fl"></div>
							<div class="fl  new_art_name font_14 overflow">游戏名称</div>
							<div class="fr font_12" style="margin-top: 1.75rem;">
								
								
								<div class="fr news_art_viewNum" style="width: 1.8rem;">1122</div>
								<div class="fr news_art_view"></div>
							</div>
						</div>
					</div>
					<div class="news_art_content ">
						<div class="news_art_art font_14 font_bold fl ofh">
							就会爆发看都不看节哀顺变丹江口市就会爆发看都不看节哀顺变丹
							<!--<span class="official backgroundColor_green color_white tac">官方</span>-->
						</div>

					</div>
					<!--此行定位的，不用理-->
					<div class="news_art_time font_12">
						8小时前
					</div>
					<!--。。。。。-->

				</div>

			</div>
			<div class="news_newGame font_14">新游推荐</div>
			<div class="news_newGame_contents ui_flex_wrapper ui_flex_h">
				<!--<div class="news_newGame_content">
					<div class="news_newGame_contentImg"></div>
					<div class="news_newGame_contentArt font_12">
						<span>游戏名称</span>
						<span class="news_newGame_contentArtstar"></span>
						<span class="fr">9.1分</span>

					</div>
				</div>
				<div class="news_newGame_content">
					<div class="news_newGame_contentImg"></div>
					<div class="news_newGame_contentArt font_12">
						<span>游戏名称</span>
						<span class="news_newGame_contentArtstar"></span>
						<span class="fr">9.1分</span>

					</div>
				</div>
				<div class="news_newGame_content">
					<div class="news_newGame_contentImg"></div>
					<div class="news_newGame_contentArt font_12">
						<span>游戏名称</span>
						<span class="news_newGame_contentArtstar"></span>
						<span class="fr">9.1分</span>

					</div>
				</div>-->
			</div>

			<div class="news_art_list">
				<!--<div class="news_art ofh" style="margin-top: 0.75rem;margin-bottom: 0.2rem;">
					<div class="news_img">
						<div class="news_img_content color_white">
							<div class="news_img_header fl"></div>
							<div class="fl  new_art_name font_14 overflow">游戏名称</div>
							<div class="fr font_12" style="margin-top: 1.75rem;">
								<div class="fr news_art_praisePoint" style="width: 1.8rem;">1234</div>
								<div class="fr news_art_praise"></div>
								<div class="fr news_art_viewNum" style="width: 1.8rem;">1122</div>
								<div class="fr news_art_view"></div>
							</div>
						</div>
					</div>
					<div class="news_art_content ">
						<div class="news_art_art font_12 fl ofh">
							就会爆发看都不看节哀顺变丹江口市就会爆发看都不看节哀顺变丹
							<span class="official backgroundColor_green color_white tac">官方</span>
						</div>

					</div>

					<div class="news_art_time font_12">
						8小时前
					</div>

				</div>-->
			</div>
		</div>
		<script type="text/javascript">
			var soc = "1"
		</script>
		<script src="../../js/socket.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/mySocket.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var page = 1
		</script>
		
		<script src="../../js/news/news.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			mui.init({
				swipeBack: true,
				pullRefresh: {
					container: "#news_content", //下拉刷新容器标识，querySelector能定位的css选择器均可，比如：id、.class等
					up: {
						height: 50, //可选.默认50.触发上拉加载拖动距离
						auto: false, //可选,默认false.自动上拉加载一次
						contentrefresh: "正在加载...", //可选，正在加载状态时，上拉加载控件上显示的标题内容
						contentnomore: '没有更多数据了', //可选，请求完毕若没有更多数据时显示的提醒内容；
						callback: up //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
					},
					down: {
						style: 'circle', //必选，下拉刷新样式，目前支持原生5+ ‘circle’ 样式
						color: '#2BD009', //可选，默认“#2BD009” 下拉刷新控件颜色
						height: '50px', //可选,默认50px.下拉刷新控件的高度,
						range: '100px', //可选 默认100px,控件可下拉拖拽的范围
						offset: '0px', //可选 默认0px,下拉刷新控件的起始位置
						auto: false, //可选,默认false.首次加载自动上拉刷新一次
						callback: down //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
					}

				}

			})

			function up() {

				page++;
                
				$.ajax({
					type: "GET",
					url: config.data + 'news/getNewsByPage',
					data: {
						"page": page
					},
					success: function(data) {
						if(data.state) {
							var n = data.news;
							var div = "";							
							for(var i = 0; i < n.length; i++) {
								if (n[i].game_id) {
									div +=
										"<div class='news_art ofh' style='margin-top: 0.75rem;margin-bottom: 0.2rem;' data-id = '"+ n[i].id +"' data-gameId = '"+ n[i].game_id +"'>"+
											"<div class='news_img' style='background-image:url("+config.img + encodeURI(n[i].img)+")'>"+
												"<div class='news_img_content color_white'>"+
													"<div class='news_img_header fl' style='background-image:url("+config.img + encodeURI(n[i].icon)+")'></div>"+
													"<div class='fl  new_art_name font_14 overflow'>"+ n[i].game_name +"</div>"+
													"<div class='fr font_12' style='margin-top: 1.75rem;'>"+														
														"<div class='fr news_art_viewNum' style='width: 1.8rem;'>"+ n[i].browse +"</div>"+
														"<div class='fr news_art_view'></div>"+
													"</div>"+
												"</div>"+
											"</div>"+
											"<div class='news_art_content'>"+
												"<div class='news_art_art font_14 font_bold fl ofh'>"+
													n[i].title +
													
												"</div>"+
						
											"</div>"+					
											"<div class='news_art_time font_12'>"+
												n[i].add_time +
											"</div>"+						
										"</div>"
								} else{
									div +=
										"<div class='news_art ofh' style='margin-top: 0.75rem;margin-bottom: 0.2rem;' data-id = '"+ n[i].id +"' >"+
											"<div class='news_img' style='background-image:url("+config.img + encodeURI(n[i].img)+")'>"+
												"<div class='news_img_content color_white'>"+
													"<div class='fr font_12' style='margin-top: 1.75rem;'>"+														
														"<div class='fr news_art_viewNum' style='width: 1.8rem;'>"+ n[i].browse +"</div>"+
														"<div class='fr news_art_view'></div>"+
													"</div>"+
												"</div>"+
											"</div>"+
											"<div class='news_art_content'>"+
												"<div class='news_art_art font_14 font_bold fl ofh'>"+
													n[i].title +
													
												"</div>"+
						
											"</div>"+
						
											"<div class='news_art_time font_12'>"+
												n[i].add_time +
											"</div>"+
						
										"</div>"
								}	
							}
							$('.news_art_list').append(div)
							if(n.length < 5) {
								mui('#news_content').pullRefresh().endPullupToRefresh(true);

							} else {
								mui('#news_content').pullRefresh().endPullupToRefresh(false);
							}
						} else {

						}
					}
				});
			}

			function down() {
				window.location.reload();
				setTimeout(function() {
					mui('#news_content').pullRefresh().endPulldown(true);
				}, 1000);

				//				 mui('#news_content').pullRefresh().endPulldown(true);
			}
		</script>
	</body>

</html>