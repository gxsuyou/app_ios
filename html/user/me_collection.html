<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="../../Public/css/public.css" />
		<link rel="stylesheet" type="text/css" href="../../css/user/me_collection.css" />
		<script src="../../Public/js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../Public/js/public.js" type="text/javascript" charset="utf-8"></script>
	</head>

	<body>
		<div class="header_box">
			<div class="before_header"></div>
			<header class="ui_flex_wrapper ui_flex_h backgroundColor_green color_white tac" id='header'>
				<div class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left">
				</div>
				<div class="notice">我的收藏</div>
			</header>
		</div>
		<div class="me_collections">
			<div class="me_collectionNav ofh">
				<span class="color_green" data-class="news_art_list">资讯</span>
				<span data-class="strategy_contents">攻略</span>
			</div>
			
			<!--我的资讯-->
			<div class="news_art_list">
				<!--<div class="news_art ofh" style="margin-top: 0.75rem;margin-bottom: 0.2rem;">
					<div class="news_img">
						<div class="news_img_content color_white">
							<div class="news_img_header fl"></div>
							<div class="fl  new_art_name font_14 overflow">游戏名称</div>
							<div class="fr font_12" style="margin-top: 1.75rem;">
								<div class="fr news_art_praisePoint" style="width: 1.8rem;">1234</div>
								<div class="fr news_art_praise"></div>
								<div class="fr news_art_viewNum" style="width: 1.8rem;">1122</div>
								<div class="fr news_art_view"></div>
							</div>
						</div>
					</div>
					<div class="news_art_content ">
						<div class="news_art_art font_12 fl ofh">
							就会爆发看都不看节哀顺变丹江口市就会爆发看都不看节哀顺变丹
							<span class="official backgroundColor_green color_white tac">官方</span>
						</div>

					</div>

					<div class="news_art_time font_12">
						8小时前
					</div>

				</div>
				<div class="news_art ofh" style="margin-top: 0.75rem;margin-bottom: 0.2rem;">
					<div class="news_img">
						<div class="news_img_content color_white">
							<div class="news_img_header fl"></div>
							<div class="fl  new_art_name font_14 overflow">游戏名称</div>
							<div class="fr font_12" style="margin-top: 1.75rem;">
								<div class="fr news_art_praisePoint" style="width: 1.8rem;">1234</div>
								<div class="fr news_art_praise"></div>
								<div class="fr news_art_viewNum" style="width: 1.8rem;">1122</div>
								<div class="fr news_art_view"></div>
							</div>
						</div>
					</div>
					<div class="news_art_content ">
						<div class="news_art_art font_12 fl ofh">
							就会爆发看都不看节哀顺变丹江口市就会爆发看都不看节哀顺变丹
							<span class="official backgroundColor_green color_white tac">官方</span>
						</div>

					</div>

					<div class="news_art_time font_12">
						8小时前
					</div>

				</div>
				<div class="news_art ofh" style="margin-top: 0.75rem;margin-bottom: 0.2rem;">
					<div class="news_img">
						<div class="news_img_content color_white">
							<div class="news_img_header fl"></div>
							<div class="fl  new_art_name font_14 overflow">游戏名称</div>
							<div class="fr font_12" style="margin-top: 1.75rem;">
								<div class="fr news_art_praisePoint" style="width: 1.8rem;">1234</div>
								<div class="fr news_art_praise"></div>
								<div class="fr news_art_viewNum" style="width: 1.8rem;">1122</div>
								<div class="fr news_art_view"></div>
							</div>
						</div>
					</div>
					<div class="news_art_content ">
						<div class="news_art_art font_12 fl ofh">
							就会爆发看都不看节哀顺变丹江口市就会爆发看都不看节哀顺变丹
							<span class="official backgroundColor_green color_white tac">官方</span>
						</div>

					</div>

					<div class="news_art_time font_12">
						8小时前
					</div>

				</div>-->
			</div>
			
			
			<!--我的资讯结束-->
			
			
			
			<!--我的攻略-->
			<div class="strategy_contents hidden">
				<!--<div class="strategy_content">
					<div class="strategy_content_head">

						<div class="strategy_content_headImg fl"></div>
						<div class="fl" style="margin-left: 1rem;">
							<div class="font_14 color_282828">用户名123</div>
							<div class="font_12 color_9e9e9e" style="margin-top: 0.2rem;">2月28号</div>
						</div>
						<div class="fr" style="margin-top: 1.5rem;margin-right: 0.8rem;">
							<span class="icon_read"></span>
							<span class="font_12" style="vertical-align: middle;">345</span>
						</div>
					</div>

					<div class="strategy_content_img"></div>
					<div class="strategy_content_titles">
						<div class="strategy_content_title color_282828">
							【理性讨论】pve只是调料【理性讨论】pve只是调料【理性讨斤斤计较军
							<span class="strategy_content_sign color_green border_radius_twenty border_green font_14 tac">精华</span>
						</div>

					</div>

					<div class="strategy_content_art font_14 color_7a7a7a">
						哈哈哈哈或或或或或或或或或或或或或或或或或或或或或或哈哈哈哈哈哈哈
					</div>
					<div class="strategy_content_classifys ofh">
						<div class="backgroundColor_gray border_radius_twenty strategy_content_classify tac font_14 color_7a7a7a fl overflow">阴阳师</div>
						<div class="fr color_9e9e9e comment_imgs fr">
							<span class="thumb"></span>
							<span class="thumb_num font_14">5</span>
							<span class="comment_img"></span>
							<span class="comment_num font_14">3</span>
						</div>
					</div>
					<!--分割线-->
					<!--<div class="cut_line backgroundColor_gray"></div>-->
					<!--分割割割割-->
				<!--</div>-->

				

			</div>
			
				
			<!--我的攻略结束-->
			
			
		</div>
		
		<script>
			var page = 0;
			var pageHash="news";
		</script>
		
		<script type="text/javascript" charset="utf-8">
			mui.init({
				swipeBack: true,
				gestureConfig:{
					  tap: true, //默认为true
					  doubletap: true, //默认为false
					  longtap: true, //默认为false
					  swipe: true, //默认为true
					  drag: true, //默认为true
					  hold: false, //默认为false，不监听
					  release: false //默认为false，不监听
				    },
				pullRefresh: {
					container: ".me_collections", //下拉刷新容器标识，querySelector能定位的css选择器均可，比如：id、.class等			    
					up: {
						height: 50, //可选.默认50.触发上拉加载拖动距离
						auto: true, //可选,默认false.自动上拉加载一次
						contentrefresh: "正在加载...", //可选，正在加载状态时，上拉加载控件上显示的标题内容
						contentnomore: '没有更多数据了', //可选，请求完毕若没有更多数据时显示的提醒内容；
						callback: up //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
					},
					down: {
						style: 'circle', //必选，下拉刷新样式，目前支持原生5+ ‘circle’ 样式
						color: '#2BD009', //可选，默认“#2BD009” 下拉刷新控件颜色
						height: '50px', //可选,默认50px.下拉刷新控件的高度,
						range: '100px', //可选 默认100px,控件可下拉拖拽的范围
						offset: '0px', //可选 默认0px,下拉刷新控件的起始位置
						auto: false, //可选,默认false.首次加载自动上拉刷新一次
						callback: down //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
					}

				}

			})
			
			function up(){
				page++;				
				if (news == 1) {
					pageHash="news";
					getNews();
				} else{
					pageHash="str";
					getStr();
				}
		
			}
			
			function down() {
				if(pageHash=="news"){
					getNews();
				}else{
					getStr();
				}
				setTimeout(function() {
					mui('.me_collections').pullRefresh().endPulldown(true);
				}, 1000);
			}
			
			function getNews(){
				$('.news_art_list').empty();
				$.ajax({
					type:"get",
					url:config.data + "users/getCollectByUserId",
					async:true,
					data:{
						userId:userId,
						page:page,
						type:1
					},
					success:function(data){
						if (data.state) {						
							var str = data.newsList;
							var div = "";
							
							
							for (var i = 0; i < str.length; i++) {
								//alert(str[i].coll_id)
								div +=
									"<div  class='news_art ofh' style='margin-top: 0.75rem;margin-bottom: 0.2rem;' data-coll_id='"+ str[i].coll_id +"'    data-id='"+ str[i].id +"' data-gameId='"+ str[i].game_id +"'>"+
										"<div class='news_img' style='background-image: url("+ config.img + encodeURI(str[i].img) +");'>"+
											"<div class='news_img_content color_white'>"+
												"<div class='news_img_header fl' style='background-image: url("+  config.img + encodeURI(str[i].icon) +");'></div>"+
												"<div class='fl  new_art_name font_14 overflow'>"+ str[i].game_name +"</div>"+
												"<div class='fr font_12' style='margin-top: 1.75rem;'>"+
											
													"<div class='fr news_art_viewNum' style='width: 1.8rem;'>"+ str[i].browse +"</div>"+
													"<div class='fr news_art_view'></div>"+
												"</div>"+
											"</div>"+
										"</div>"+
										"<div class='news_art_content'>"+
											"<div class='news_art_art font_12 fl ofh'>"+
												str[i].title +
											"</div>"+
					
										"</div>"+
					
										"<div class='news_art_time font_12'>"+
											str[i].add_time +
										"</div>"+					
									"</div>"
							}
							$('.news_art_list').append(div);
							if (str.length < 10) {
								mui('.me_collections').pullRefresh().endPullupToRefresh(true);
							} else{
								mui('.me_collections').pullRefresh().endPullupToRefresh(true);
							}
						} else{
							
						}
					}
				});
			}
		
			function getStr(){
				$('.strategy_contents').empty();
				$.ajax({
					type:"get",
					url:config.data + "users/getCollectByUserId",
					async:true,
					data:{
						userId:userId,
						page:page,
						type:2
					},
					success:function(data){
						if (data.state) {							
							var str = data.strategyList;							
							var div = "",name;
							for (var i = 0; i < str.length; i++) {
								if (str[i].src) {
									var src = "src"
								} else{
									var src = "hidden"
								}
								
								if(str[i].admin){
									name=str[i].nike_name;//如果是后台
								}else{
									name=str[i].nick_name;
								}
								
								
								if(str[i].top_img_src==""||str[i].top_img_src==null){									
									imgSrc="";
									imgToggle="none";	
								}else{
									imgSrc=str[i].top_img_src;
									imgToggle="block";						
								}
								
								var detail=$(str[i].detail).text();  
								if(str[i].portrait==0||str[i].portrait==null){
									portrait="../../Public/image/morentouxiang.png";
								}else{
									portrait=str[i].portrait;
								}
					
							    div +=
										"<div class='strategy_content' data-coll_id='"+ str[i].coll_id +"'  data-id='"+ str[i].id +"' data-userId='"+ str[i].user_id +"'>"+
											"<div class='strategy_content_head'>"+
							
												"<div class='strategy_content_headImg fl' style='background-image: url(" + encodeURI(portrait) + ");' ></div>"+
												"<div class='fl' style='margin-left: 1rem;'>"+
													"<div class='font_14 color_282828' style='margin-top: 0.4rem;'>"+ name +"</div>"+
													"<div class='font_12 color_9e9e9e'>"+ str[i].add_time +"</div>"+
												"</div>"+
												"<div class='fr' style='margin-top: 1.5rem;margin-right: 0.8rem;display:flex;align-items:center;'>"+
													"<span class='icon_read'></span>"+
													"<span class='font_12 color_7a7a7a' style='vertical-align: middle;margin-left: 0.4rem;'>"+ str[i].browse_num +"</span>"+
												"</div>"+
											"</div>"+
										
											"<div class='strategy_content_img "+ src +"' style='background-image: url(" + config.img + encodeURI(str[i].src) + ");'></div>"+
																						
											"<div class='strategy_content_art font_14 color_7a7a7a'>"+
												"<img class='str_img' style='width:100%;display:"+imgToggle+"' src="+imgSrc+">"+
												"<div class='strategy_content_titles'>"+
												  "<div class='strategy_content_title color_282828'>" + str[i].title + "</div>"+											
											    "</div>"+
												"<div class='strategy_content'>"+detail+"</div>"+
											"</div>"+
											"<div class='strategy_content_classifys ofh' style='margin-top:1rem'>"+
												"<div class='backgroundColor_gray border_radius_twenty strategy_content_classify tac font_14 color_7a7a7a fl overflow'>"+ str[i].game_name +"</div>"+
												"<div class='fr color_9e9e9e comment_imgs fr'>"+
//															"<span class='thumb' data-id='"+ str[i].id +"' data-userId='"+ str[i].user_id +"'></span>"+
//															"<span class='thumb_num font_14'>"+ str[i].agree_num +"</span>"+
															"<span class='comment_img' data-id='"+ str[i].id +"' data-userId='"+ str[i].user_id +"'></span>"+
															"<span class='comment_num font_14' style='margin-left: 0.4rem;'>"+ str[i].comment_num +"</span>"+
												"</div>"+
											"</div>"+
											
											"<div class='cut_line backgroundColor_gray'></div>"+
											
										"</div>"
										
							}
							$('.strategy_contents').append(div);
							
							if (str.length < 10) {
								mui('.me_collections').pullRefresh().endPullupToRefresh(true);
							} else{
								mui('.me_collections').pullRefresh().endPullupToRefresh(false);
							}
							
						} else{
							
						}
					}
				});
			}
		</script>
		<script src="../../js/user/me_collection.js" type="text/javascript" charset="utf-8"></script>
	</body>

</html>